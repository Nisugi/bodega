<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GemStone IV Playershops</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="wrapper">
        <!-- Header -->
        <header>
            <h1>GemStone IV Playershops</h1>
            <div class="stats" id="stats">
                <span id="item-count">Loading...</span> items |
                <span id="shop-count">0</span> shops |
                <span id="town-count">0</span> towns |
                Last updated: <span id="last-updated">Never</span>
            </div>
        </header>

        <!-- Main Container -->
        <div id="main-container">
            <!-- Left Sidebar - Filters -->
            <aside id="sidebar">
                <!-- Mode Tabs -->
                <div class="mode-tabs">
                    <button id="search-tab" class="mode-tab active">Search</button>
                    <button id="browse-tab" class="mode-tab">Browse</button>
                </div>

                <!-- Search Mode -->
                <div id="search-mode" class="mode-content">
                    <div class="filter-section">
                        <h3>Search</h3>
                        <input type="text" id="search-input" placeholder="Search items..." />
                        <button id="search-btn">Search</button>
                        <button id="clear-btn">Clear</button>
                    </div>

                <div class="filter-section">
                    <h3>Town</h3>
                    <select id="town-filter" multiple size="10">
                        <option value="">All Towns</option>
                    </select>
                </div>

                <div class="filter-section">
                    <h3>Price Range</h3>
                    <select id="price-filter">
                        <option value="">Any Price</option>
                        <option value="0-1000">Under 1k</option>
                        <option value="1000-10000">1k - 10k</option>
                        <option value="10000-100000">10k - 100k</option>
                        <option value="100000-500000">100k - 500k</option>
                        <option value="500000-1000000">500k - 1M</option>
                        <option value="1000000-5000000">1M - 5M</option>
                        <option value="5000000-10000000">5M - 10M</option>
                        <option value="10000000-50000000">10M - 50M</option>
                        <option value="50000000-999999999">Over 50M</option>
                    </select>
                </div>

                <div class="filter-section">
                    <h3>Enchant</h3>
                    <select id="enchant-filter">
                        <option value="">Any Enchant</option>
                        <option value="15">+15 or higher</option>
                        <option value="20">+20 or higher</option>
                        <option value="25">+25 or higher</option>
                        <option value="30">+30 or higher</option>
                        <option value="35">+35 or higher</option>
                        <option value="40">+40 or higher</option>
                        <option value="45">+45 or higher</option>
                        <option value="50">+50 or higher</option>
                    </select>
                </div>

                <div class="filter-section">
                    <h3>Item Type</h3>
                    <select id="item-type-filter">
                        <option value="">All Types</option>
                        <option value="weapon">Weapons</option>
                        <option value="armor">Armor</option>
                        <option value="shield">Shields</option>
                        <option value="container">Containers</option>
                        <option value="jewelry">Jewelry</option>
                        <option value="miscellaneous">Miscellaneous</option>
                    </select>
                </div>

                <div class="filter-section">
                    <h3>Capacity</h3>
                    <select id="capacity-filter">
                        <option value="">Any Capacity</option>
                        <option value="very small">Very Small</option>
                        <option value="small">Small</option>
                        <option value="fairly small">Fairly Small</option>
                        <option value="slightly small">Slightly Small</option>
                        <option value="somewhat small">Somewhat Small</option>
                        <option value="medium">Medium</option>
                        <option value="slightly large">Slightly Large</option>
                        <option value="fairly large">Fairly Large</option>
                        <option value="large">Large</option>
                        <option value="significant">Significant</option>
                        <option value="particularly large">Particularly Large</option>
                        <option value="very large">Very Large</option>
                        <option value="huge">Huge</option>
                        <option value="gigantic">Gigantic</option>
                    </select>
                </div>

                <div class="filter-section">
                    <h3>Armor Type</h3>
                    <select id="armor-type-filter">
                        <option value="">Any Armor</option>
                        <option value="cloth">Cloth</option>
                        <option value="leather">Leather</option>
                        <option value="scale">Scale</option>
                        <option value="chain">Chain</option>
                        <option value="plate">Plate</option>
                    </select>
                </div>

                <div class="filter-section">
                    <h3>Shield Type</h3>
                    <select id="shield-type-filter">
                        <option value="">Any Shield</option>
                        <option value="small">Small Shield</option>
                        <option value="medium">Medium Shield</option>
                        <option value="large">Large Shield</option>
                        <option value="tower">Tower Shield</option>
                    </select>
                </div>

                <div class="filter-section">
                    <h3>Wear Location</h3>
                    <select id="wear-location-filter">
                        <option value="">Any Location</option>
                        <option value="general">General (Pin-worn)</option>
                        <option value="back">Back</option>
                        <option value="waist">Waist (Belt)</option>
                        <option value="head">Head</option>
                        <option value="shoulder">Shoulder (Shield)</option>
                        <option value="shoulders">Shoulders (Cloak)</option>
                        <option value="legs">Legs</option>
                        <option value="torso">Torso (Armor)</option>
                        <option value="wrist">Wrist</option>
                        <option value="finger">Finger</option>
                        <option value="feet">Feet</option>
                        <option value="neck">Neck</option>
                        <option value="belt">Belt (Pouch)</option>
                        <option value="arms">Arms</option>
                        <option value="earlobe">Earlobe</option>
                        <option value="earlobes">Earlobes</option>
                        <option value="ankle">Ankle</option>
                        <option value="front">Front (Apron)</option>
                        <option value="hands">Hands</option>
                        <option value="hair">Hair</option>
                        <option value="undershirt">Undershirt</option>
                        <option value="leggings">Leggings</option>
                    </select>
                </div>

                <div class="filter-section">
                    <h3>Skill Required</h3>
                    <select id="skill-filter">
                        <option value="">Any Skill</option>
                        <option value="edged weapons">Edged Weapons</option>
                        <option value="blunt weapons">Blunt Weapons</option>
                        <option value="two handed weapons">Two Handed Weapons</option>
                        <option value="twohanded weapons">Twohanded Weapons</option>
                        <option value="polearms">Polearms</option>
                        <option value="ranged weapons">Ranged Weapons</option>
                        <option value="thrown weapons">Thrown Weapons</option>
                        <option value="brawling">Brawling</option>
                        <option value="shield use">Shield Use</option>
                        <option value="armor use">Armor Use</option>
                    </select>
                </div>

                <div class="filter-section">
                    <h3>Special Properties</h3>
                    <label><input type="checkbox" id="enhancive-filter"> Enhancive</label><br>
                    <label><input type="checkbox" id="max-light-filter"> Max Lightened</label><br>
                    <label><input type="checkbox" id="max-deep-filter"> Max Deepened</label><br>
                    <label><input type="checkbox" id="persists-filter"> Persists</label><br>
                    <label><input type="checkbox" id="crumbly-filter"> Crumbly</label><br>
                    <label><input type="checkbox" id="flares-filter"> Has Flares</label><br>
                    <label><input type="checkbox" id="spell-filter"> Has Spell</label><br>
                    <label><input type="checkbox" id="blessed-filter"> Blessed/Holy</label>
                </div>

                <div class="filter-section">
                    <h3>Sort By</h3>
                    <select id="sort-filter">
                        <option value="name">Name</option>
                        <option value="price-asc">Price (Low to High)</option>
                        <option value="price-desc">Price (High to Low)</option>
                        <option value="enchant-desc">Enchant (High to Low)</option>
                        <option value="town">Town</option>
                        <option value="type">Item Type</option>
                        <option value="capacity">Capacity</option>
                    </select>
                </div>

                <div class="filter-section">
                    <button id="apply-filters">Apply Filters</button>
                    <button id="reset-filters">Reset All</button>
                </div>
                </div>

                <!-- Browse Mode -->
                <div id="browse-mode" class="mode-content" style="display: none;">
                    <div class="filter-section">
                        <h3>Select Town</h3>
                        <select id="browse-town-select" size="10">
                            <option value="">Loading towns...</option>
                        </select>
                    </div>

                    <div class="filter-section" id="shop-list-section" style="display: none;">
                        <h3>Shops in <span id="selected-town-name"></span></h3>
                        <div id="shop-list">
                            <!-- Shops will be populated here -->
                        </div>
                    </div>

                    <div class="filter-section" id="room-list-section" style="display: none;">
                        <h3>Rooms in <span id="selected-shop-name"></span></h3>
                        <div id="room-list">
                            <!-- Rooms will be populated here -->
                        </div>
                        <button id="back-to-shops" class="nav-button">← Back to Shops</button>
                    </div>
                </div>
            </aside>

            <!-- Main Content Area -->
            <main id="content">
                <div id="results-header">
                    <span id="results-count">0 items found</span>
                    <span id="page-info"></span>
                </div>

                <!-- Results Table -->
                <div id="results-container">
                    <table id="results-table">
                        <thead>
                            <tr>
                                <th class="sortable" data-sort="name">Item Name</th>
                                <th class="sortable" data-sort="price">Price</th>
                                <th>Properties</th>
                                <th class="sortable" data-sort="town">Town</th>
                                <th>Shop</th>
                            </tr>
                        </thead>
                        <tbody id="results-body">
                            <!-- Results will be inserted here -->
                        </tbody>
                    </table>
                </div>

                <!-- Pagination -->
                <div id="pagination">
                    <button id="prev-page" disabled>Previous</button>
                    <span id="page-numbers"></span>
                    <button id="next-page">Next</button>
                </div>
            </main>
        </div>

        <!-- Item Detail Modal -->
        <div id="item-modal" class="modal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <h2 id="modal-item-name">Item Name</h2>
                <div id="modal-content-body">
                    <!-- Item details will be inserted here -->
                </div>
            </div>
        </div>

        <!-- Loading Overlay -->
        <div id="loading-overlay">
            <div class="spinner"></div>
            <p>Loading shop data...</p>
        </div>
    </div>

    <script src="data-loader.js"></script>
    <script src="search.js"></script>
    <script src="browse.js"></script>
</body>
</html>